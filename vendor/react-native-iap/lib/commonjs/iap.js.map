{"version":3,"names":["_reactNative","require","IapAmazon","_interopRequireWildcard","exports","IapAndroid","IapIos","IapIosSk2","_android2","_apple","_appleSk","_internal","_types","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","RNIapIos","RNIapIosSk2","RNIapModule","RNIapAmazonModule","NativeModules","ANDROID_ITEM_TYPE_SUBSCRIPTION","ProductType","subs","ANDROID_ITEM_TYPE_IAP","inapp","setup","storekitMode","storekit1Mode","storekit2Mode","storekitHybridMode","initConnection","getNativeModule","endConnection","flushFailedPurchasesCachedAsPendingAndroid","getAndroidModule","flushFailedPurchasesCachedAsPending","getProducts","skus","length","Promise","reject","Platform","select","ios","items","isIosStorekit2","getItems","map","productSk2Map","filter","item","includes","productId","android","products","getItemsByType","singleProductAndroidMap","fillProductsWithAdditionalData","Error","getSubscriptions","subscriptionSk2Map","addSubscriptionPlatform","SubscriptionPlatform","androidPlatform","getAndroidModuleType","subscriptions","castSubscriptions","amazon","platform","subscription","getPurchaseHistory","alsoPublishToEventListener","automaticallyFinishRestoredTransactions","onlyIncludeActiveItems","resolve","getAvailableItems","transactionSk2ToPurchaseMap","console","warn","getAvailablePurchases","error","timeout","timeoutPromise","_","setTimeout","race","all","getAvailableItemsByType","catch","concat","requestPurchase","request","sku","andDangerouslyFinishTransactionAutomaticallyIOS","appAccountToken","quantity","withOffer","offer","offerSk2Map","purchase","buyProduct","offerToRecord","isAmazon","buyItemByType","obfuscatedAccountIdAndroid","obfuscatedProfileIdAndroid","isOfferPersonalized","undefined","requestSubscription","prorationModeAmazon","subscriptionOffers","purchaseTokenAndroid","replacementModeAndroid","so","offerToken","finishTransaction","isConsumable","developerPayloadAndroid","transactionId","getIosModule","purchaseToken","consumeProduct","userIdAmazon","isAcknowledgedAndroid","purchaseStateAndroid","PurchaseStateAndroid","PURCHASED","acknowledgePurchase","deepLinkToSubscriptions","isAmazonDevice","deepLinkToSubscriptionsIos","deepLinkToSubscriptionsAmazon","deepLinkToSubscriptionsAndroid","getStorefront","getAppTransaction"],"sourceRoot":"../../src","sources":["iap.ts"],"mappings":"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C,OAAO,CAACmC,OAAO,CAAC,EAAE,CAAC,CAAC,EACjC,CAAC;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjFAzF,OAAA,CAAAqF,kBAAA,GAAAA,kBAAA;AAkFO,MAAMS,qBAAqB,GAAGA,CAAC;EACpCR,0BAA0B,GAAG,KAAK;EAClCC,uCAAuC,GAAG,KAAK;EAC/CC,sBAAsB,GAAG;AAK3B,CAAC,GAAG,CAAC,CAAC,KACJ,CACEhC,qBAAQ,CAACC,MAAM,CAAC;EACdC,GAAG,EAAE,MAAAA,CAAA,KAAY;IACf,IAAI,IAAAE,wBAAc,EAAC,CAAC,EAAE;MACpB,OAAON,OAAO,CAACmC,OAAO,CACpB,CACE,MAAM1D,WAAW,CAAC2D,iBAAiB,CACjCJ,0BAA0B,EAC1BE,sBACF,CAAC,EACD1B,GAAG,CAAC6B,oCAA2B,CACnC,CAAC;IACH,CAAC,MAAM;MACL,OAAO7D,QAAQ,CAAC4D,iBAAiB,CAC/BH,uCACF,CAAC;IACH;EACF,CAAC;EACDnB,OAAO,EAAE,MAAAA,CAAA,KAAY;IACnB,IAAInC,iBAAiB,EAAE;MACrB,OAAO,MAAMA,iBAAiB,CAACyD,iBAAiB,CAAC,CAAC;IACpD;;IAEA;IACA,IAAI1D,WAAW,CAAC0D,iBAAiB,EAAE;MACjC,IAAI;QACF,OAAO,MAAM1D,WAAW,CAAC0D,iBAAiB,CAAC,CAAC;MAC9C,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdH,OAAO,CAACC,IAAI,CACV,mEAAmE,EACnEE,KACF,CAAC;QACD;MACF;IACF;;IAEA;IACA;IACA,MAAMC,OAAO,GAAG,KAAK,CAAC,CAAC;IACvB,MAAMC,cAAc,GAAG,IAAI3C,OAAO,CAAQ,CAAC4C,CAAC,EAAE3C,MAAM,KAClD4C,UAAU,CACR,MAAM5C,MAAM,CAAC,IAAIkB,KAAK,CAAC,+BAA+B,CAAC,CAAC,EACxDuB,OACF,CACF,CAAC;IAED,IAAI;MACF,MAAM,CAAC3B,QAAQ,EAAEW,aAAa,CAAC,GAAG,MAAM1B,OAAO,CAAC8C,IAAI,CAAC,CACnD9C,OAAO,CAAC+C,GAAG,CAAC,CACVrE,WAAW,CAACsE,uBAAuB,CAAChE,qBAAqB,CAAC,CAACiE,KAAK,CAC9D,MAAM,EACR,CAAC,EACDvE,WAAW,CAACsE,uBAAuB,CACjCnE,8BACF,CAAC,CAACoE,KAAK,CAAC,MAAM,EAAgB,CAAC,CAChC,CAAC,EACFN,cAAc,CACf,CAAC;MAEF,OAAO5B,QAAQ,CAACmC,MAAM,CAACxB,aAAa,CAAC;IACvC,CAAC,CAAC,OAAOe,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpD,OAAO,EAAE;IACX;EACF;AACF,CAAC,CAAC,KAAK,MAAMzC,OAAO,CAACmC,OAAO,CAAC,EAAE,CAAC,CAAC,EACjC,CAAC;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxEAzF,OAAA,CAAA8F,qBAAA,GAAAA,qBAAA;AA0EO,MAAMW,eAAe,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"}