{"version":3,"names":["NativeModules","Platform","IapAmazon","IapAndroid","IapIos","IapIosSk2","singleProductAndroidMap","offerToRecord","offerSk2Map","productSk2Map","subscriptionSk2Map","transactionSk2ToPurchaseMap","fillProductsWithAdditionalData","getAndroidModule","getAndroidModuleType","getIosModule","getNativeModule","isAmazon","isIosStorekit2","storekit1Mode","storekit2Mode","storekitHybridMode","ProductType","PurchaseStateAndroid","SubscriptionPlatform","RNIapIos","RNIapIosSk2","RNIapModule","RNIapAmazonModule","ANDROID_ITEM_TYPE_SUBSCRIPTION","subs","ANDROID_ITEM_TYPE_IAP","inapp","setup","storekitMode","initConnection","endConnection","flushFailedPurchasesCachedAsPendingAndroid","flushFailedPurchasesCachedAsPending","getProducts","skus","length","Promise","reject","select","ios","items","getItems","map","filter","item","includes","productId","android","products","getItemsByType","Error","getSubscriptions","addSubscriptionPlatform","androidPlatform","subscriptions","castSubscriptions","amazon","platform","subscription","getPurchaseHistory","alsoPublishToEventListener","automaticallyFinishRestoredTransactions","onlyIncludeActiveItems","resolve","getAvailableItems","console","warn","getAvailablePurchases","error","timeout","timeoutPromise","_","setTimeout","race","all","getAvailableItemsByType","catch","concat","requestPurchase","request","sku","andDangerouslyFinishTransactionAutomaticallyIOS","appAccountToken","quantity","withOffer","offer","purchase","buyProduct","buyItemByType","obfuscatedAccountIdAndroid","obfuscatedProfileIdAndroid","isOfferPersonalized","undefined","requestSubscription","prorationModeAmazon","subscriptionOffers","purchaseTokenAndroid","replacementModeAndroid","so","offerToken","finishTransaction","isConsumable","developerPayloadAndroid","transactionId","purchaseToken","consumeProduct","userIdAmazon","isAcknowledgedAndroid","purchaseStateAndroid","PURCHASED","acknowledgePurchase","deepLinkToSubscriptions","isAmazonDevice","deepLinkToSubscriptionsIos","deepLinkToSubscriptionsAmazon","deepLinkToSubscriptionsAndroid","getStorefront","getAppTransaction"],"sourceRoot":"../../src","sources":["iap.ts"],"mappings":"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C,iBAAiB,CAAC,CAAC;IACpD;;IAEA;IACA;IACAC,OAAO,CAACC,IAAI,CACV,gJACF,CAAC;IACD,OAAO,EAAE;EACX;AACF,CAAC,CAAC,KAAK,MAAM9B,OAAO,CAAC2B,OAAO,CAAC,EAAE,CAAC,CAAC,EACjC,CAAC;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMI,qBAAqB,GAAGA,CAAC;EACpCP,0BAA0B,GAAG,KAAK;EAClCC,uCAAuC,GAAG,KAAK;EAC/CC,sBAAsB,GAAG;AAK3B,CAAC,GAAG,CAAC,CAAC,KACJ,CACEnE,QAAQ,CAAC2C,MAAM,CAAC;EACdC,GAAG,EAAE,MAAAA,CAAA,KAAY;IACf,IAAI3B,cAAc,CAAC,CAAC,EAAE;MACpB,OAAOwB,OAAO,CAAC2B,OAAO,CACpB,CACE,MAAM3C,WAAW,CAAC4C,iBAAiB,CACjCJ,0BAA0B,EAC1BE,sBACF,CAAC,EACDpB,GAAG,CAACrC,2BAA2B,CACnC,CAAC;IACH,CAAC,MAAM;MACL,OAAOc,QAAQ,CAAC6C,iBAAiB,CAC/BH,uCACF,CAAC;IACH;EACF,CAAC;EACDd,OAAO,EAAE,MAAAA,CAAA,KAAY;IACnB,IAAIzB,iBAAiB,EAAE;MACrB,OAAO,MAAMA,iBAAiB,CAAC0C,iBAAiB,CAAC,CAAC;IACpD;;IAEA;IACA,IAAI3C,WAAW,CAAC2C,iBAAiB,EAAE;MACjC,IAAI;QACF,OAAO,MAAM3C,WAAW,CAAC2C,iBAAiB,CAAC,CAAC;MAC9C,CAAC,CAAC,OAAOI,KAAK,EAAE;QACdH,OAAO,CAACC,IAAI,CACV,mEAAmE,EACnEE,KACF,CAAC;QACD;MACF;IACF;;IAEA;IACA;IACA,MAAMC,OAAO,GAAG,KAAK,CAAC,CAAC;IACvB,MAAMC,cAAc,GAAG,IAAIlC,OAAO,CAAQ,CAACmC,CAAC,EAAElC,MAAM,KAClDmC,UAAU,CACR,MAAMnC,MAAM,CAAC,IAAIa,KAAK,CAAC,+BAA+B,CAAC,CAAC,EACxDmB,OACF,CACF,CAAC;IAED,IAAI;MACF,MAAM,CAACrB,QAAQ,EAAEM,aAAa,CAAC,GAAG,MAAMlB,OAAO,CAACqC,IAAI,CAAC,CACnDrC,OAAO,CAACsC,GAAG,CAAC,CACVrD,WAAW,CAACsD,uBAAuB,CAAClD,qBAAqB,CAAC,CAACmD,KAAK,CAC9D,MAAM,EACR,CAAC,EACDvD,WAAW,CAACsD,uBAAuB,CACjCpD,8BACF,CAAC,CAACqD,KAAK,CAAC,MAAM,EAAgB,CAAC,CAChC,CAAC,EACFN,cAAc,CACf,CAAC;MAEF,OAAOtB,QAAQ,CAAC6B,MAAM,CAACvB,aAAa,CAAC;IACvC,CAAC,CAAC,OAAOc,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpD,OAAO,EAAE;IACX;EACF;AACF,CAAC,CAAC,KAAK,MAAMhC,OAAO,CAAC2B,OAAO,CAAC,EAAE,CAAC,CAAC,EACjC,CAAC;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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"}